<!doctype html>
<html>
<head>
<title>Deadbeat Escapement Simulator</title>
<style type="text/css">
#display {
    float: left;
}
#params {
    float: left;
    display: inline-block;
    max-width: 600px;
}
input {
    width: 50px;
}
#params label {
    display: inline-block;
    width: 220px;
    text-align: right;
}
</style>
</head>
<body>
<h1>Deadbeat Escapement Simulator</h1>

<div id="display">
    <canvas id="canvas" width="400" height="600"></canvas><br>
    Period: <span id="period"></span> secs (<span id="freq"></span> Hz)<br>
    Amplitude: <span id="amplitude"></span>&deg;<br>
    Asymmetry: <span id="asymmetry"></span>&deg;<br>
</div>

<div id="params">
    <label></label> <b>Escape wheel</b><br>
    <label for="teeth">Teeth:</label> <input id="teeth" type="text"><br>
    <label for="majordiameter">Major diameter:</label> <input id="majordiameter" type="text"> mm<br>
    <label for="minordiameter">Minor diameter:</label> <input id="minordiameter" type="text"> mm<br>
    <label for="leadingangle">Leading edge angle:</label> <input id="leadingangle" type="text"> &deg; from radial<br>
    <label for="trailingangle">Trailing edge angle:</label> <input id="trailingangle" type="text"> &deg; from radial<br>

    <br>
    <label></label> <b>Anchor</b><br>
    <label for="toothspan">Tooth span:</label> <input id="toothspan" type="text"><br>
    <label for="lift">Lift:</label> <input id="lift" type="text"> &deg; of anchor</input><br>
    <label for="drop">Drop:</label> <input id="drop" type="text"> &deg; of escape wheel</input><br>
    <!--<label></label> TODO: asymmetrical lift/drop?<br>-->
    <label for="locksafety">Lock safety:</label> <input id="locksafety" type="text"> &deg; of anchor</input><br>
    <!--<label for="sectoroffset">Sector offset:</label> <input id="sectoroffset" type="text"> &deg; around escape wheel (TODO)<br>
    <label for="anchorpivotoffset">Anchor pivot offset:</label> <input id="anchorpivotoffset" type="text"> mm above theoretical (TODO)<br>-->
    <label for="restingsurfaceangleoffset">Resting surface angle offset:</label> <input id="restingsurfaceangleoffset" type="text"> &deg; from tangent<br>
    <label for="restingsurfacelength">Resting surface length:</label> <input id="restingsurfacelength" type="text"> &deg; of anchor<br>

    <br>
    <label></label> <b>Pendulum</b><br>
    <label for="bobmass">Bob mass:</label> <input id="bobmass" type="text"> kg<br>
    <div style="display:none"><label for="bobdiameter">Bob diameter:</label> <input id="bobdiameter" type="text"> mm<br></div>
    <label for="rodlength">Rod length:</label> <input id="rodlength" type="text"> mm<br>
    <label for="qfactor">Q factor:</label> <input id="qfactor" type="text"><br>

    <br>
    <label></label> <b>Simulation</b><br>
    <label for="torque">Drive torque:</label> <input id="torque" type="text"> Nm<br>
    <label for="friction">Coefficient of friction:</label> <input id="friction" type="text"><br>
    <label for="maxescapewheelangvel">Max. escape wheel speed:</label> <input id="maxescapewheelangvel" type="text"> &deg;/sec<br>
    <label for="initialkick">Initial kick:</label> <input id="initialkick" type="text"> &deg;<br>
    <label for="noescapement">Disconnect escapement?</label> <input id="noescapement" type="checkbox"><br>

    <br>
    <label></label>
    <button id="apply">Apply</button>
    <button id="reset">Reset</button><br>

    <br>
    <label></label>
    <button id="exportDxf">Export DXF</button>
    <button id="exportSvg">Export SVG</button><br>
</div>


<div style="clear:both"></div>

<div id="scopes">
    <button id="addscope">+ Add scope</button><br>
</div>

<script src="planck.min.js?7"></script>
<script src="maths.js?7"></script>
<script src="util.js?7"></script>
<script src="renderer.js?7"></script>
<script src="escapewheel.js?7"></script>
<script src="anchor.js?7"></script>
<script src="sim.js?7"></script>
<script src="dom.js?7"></script>
<script src="scope.js?7"></script>
<script src="export.js?7"></script>
<script src="ui.js?7"></script>
</body>
</html>
